const { SlashCommandBuilder } = require('discord.js'); const config = require('../config.json'); const fs = require('fs'); module.exports = { data: new SlashCommandBuilder() .setName('ticketgui') .setDescription('Manage ticket GUI categories') .addSubcommand(sub => sub.setName('add').setDescription('Add a category button to the GUI').addStringOption(opt => opt.setName('name').setDescription('Category name (e.g., Staff-Apply)').setRequired(true))) .addSubcommand(sub => sub.setName('remove').setDescription('Remove a category button from the GUI').addStringOption(opt => opt.setName('name').setDescription('Category name').setRequired(true))), async execute(interaction) { if (!interaction.member.permissions.has('ManageGuild')) { return interaction.reply({ content: 'You lack permission.', ephemeral: true }); } const sub = interaction.options.getSubcommand(); const name = interaction.options.getString('name'); if (sub === 'add') { if (!config.ticketGuiCategories.includes(name)) { config.ticketGuiCategories.push(name); fs.writeFileSync('../config.json', JSON.stringify(config, null, 2)); return interaction.reply({ content: `✅ Added **${name}** to ticket GUI.`, ephemeral: true }); } return interaction.reply({ content: `⚠️ **${name}** is already in the GUI.`, ephemeral: true }); } if (sub === 'remove') { if (config.ticketGuiCategories.includes(name)) { config.ticketGuiCategories = config.ticketGuiCategories.filter(n => n !== name); fs.writeFileSync('../config.json', JSON.stringify(config, null, 2)); return interaction.reply({ content: `✅ Removed **${name}** from ticket GUI.`, ephemeral: true }); } return interaction.reply({ content: `⚠️ **${name}** not found in GUI.`, ephemeral: true }); } }, };

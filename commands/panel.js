const { SlashCommandBuilder, ActionRowBuilder, ButtonBuilder, ButtonStyle, EmbedBuilder } = require('discord.js'); const config = require('../config.json'); module.exports = { data: new SlashCommandBuilder() .setName('panel') .setDescription('Send the main ticket panel with GUI'), async execute(interaction) { if (!interaction.member.permissions.has('ManageGuild')) { return interaction.reply({ content: 'You lack permission to use this command.', ephemeral: true }); } const embed = new EmbedBuilder() .setTitle('ðŸŽ« Support Center') .setDescription('Click a button below to open a support ticket.') .setColor(0x5865f2) .setFooter({ text: 'Your request will be handled by our support team.' }); const rows = []; let currentRow = new ActionRowBuilder(); config.ticketGuiCategories.forEach((name, i) => { if (currentRow.components.length === 5) { rows.push(currentRow); currentRow = new ActionRowBuilder(); } currentRow.addComponents( new ButtonBuilder() .setCustomId(`ticket_open_${i}`) .setLabel(name) .setStyle(ButtonStyle.Primary) ); }); if (currentRow.components.length > 0) { rows.push(currentRow); } await interaction.reply({ embeds: [embed], components: rows }); }, };
